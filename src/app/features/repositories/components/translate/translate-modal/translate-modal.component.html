<div class="fixed inset-0 z-50 overflow-y-auto">
  <!-- Backdrop -->
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" (click)="closeModal.emit(null)"></div>

  <!-- Modal -->
  <div class="flex min-h-full items-center justify-center p-4">
    <div class="relative transform overflow-hidden rounded-lg bg-white dark:bg-dark-700 px-4 pb-4 pt-5 shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
      <!-- Header -->
      <div class="mb-4">
        <div class="flex items-center gap-3">
          <!-- Provider Icon -->
          <app-provider-logo [provider]="repository().provider" [title]="repository().visibility" 
          [class]="repository().visibility === 'private' ? 
            'h-6 w-6  text-red-700 dark:text-red-300' : 
            'h-6 w-6  text-gray-700 dark:text-gray-300'"/>
          <div>
            <p class="text-sm text-gray-500 dark:text-gray-400">{{repository().namespace}}</p>
            <h3 class="text-lg font-semibold dark:text-white">{{repository().name}}</h3>
          </div>
          @if (repository().visibility === 'private') {
            <span class="ml-auto badge warning">
              Private
            </span>
          } @else if (repository().visibility === 'public') {
            <span class="ml-auto badge">
              Public
            </span>
          }        
        </div>
        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">{{repository().description}}</p>
      </div>

      <!-- Form -->
      <form [formGroup]="actionForm" (ngSubmit)="onSubmit()" class="space-y-4">
        <!-- Branch selector -->
        <div>
          <label for="branch">Select Branch</label>
          <app-branch-selector [repository]="repository()" formControlName="branch"></app-branch-selector>
        </div>
        <!-- Xliff extension selector -->
        <div>
          <label for="ext">Xliff Extension</label>
          <app-ext-selector formControlName="ext" class="w-full"></app-ext-selector>
        </div>
        <!-- TransUnit state input -->
        <div>
          <label for="transUnitState">TransUnit State</label>
          <app-trans-unit-state-selector formControlName="transUnitState" class="w-full" [additionalTransUnitStates]="['all']"></app-trans-unit-state-selector>
        </div>
        <!-- TransUnit state input -->
        <div>
          <label for="procedeedTransUnitState">Procedeed TransUnit State</label>
          <app-trans-unit-state-selector formControlName="procedeedTransUnitState" class="w-full"></app-trans-unit-state-selector>
        </div>

        <!-- Actions -->
        <div class="mt-5 flex justify-end gap-3">
          <button type="button" (click)="closeModal.emit(null)" class="stroke-primary">
            Cancel
          </button>
          <button type="submit" [disabled]="!actionForm.valid" class="flat-primary" >
            Translate
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
