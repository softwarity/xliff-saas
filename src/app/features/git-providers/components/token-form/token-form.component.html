<form [formGroup]="form()" (ngSubmit)="onSubmit()" class="space-y-4">
  @if (!provider().connected || showInput()) {
    <div class="form-group">
      <input
        type="password"
        formControlName="token"
        i18n-placeholder="@@enterAccessToken"
        placeholder="Enter your access token"
        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-dark-800 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      />
      
      @if (form().get('token')?.invalid && form().get('token')?.touched) {
        <div class="error-messages mt-2">
          @if (form().get('token')?.errors?.['required']) {
            <p class="text-red-500 text-sm" i18n="@@tokenRequired">
              Token is required
            </p>
          }
        </div>
      }
    </div>
  }

  <div class="flex space-x-2">
    @if (!provider().connected) {
      <button 
        type="submit"
        class="flex-1 bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition"
        [disabled]="form().invalid"
        i18n="@@connect">
        Connect
      </button>
    }
    
    @if (provider().connected) {
      <button 
        type="button"
        (click)="onUpdateToken(true)"
        class="flex-1 bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition"
        [hidden]="showInput()"
        i18n="@@updateToken">
        Update Token
      </button>
      
      <button 
        type="button"
        (click)="onDisconnect()"
        class="flex-1 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700 transition"
        i18n="@@disconnect">
        Disconnect
      </button>
    }
  </div>
</form>